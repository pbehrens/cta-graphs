<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<title></title>
</head>

<body>
<h1>Changes in the S-Python Package</h1>

<h2>Version 7</h2>
<h4>Minor 1</h4>
<dl>
  <dt>
  <li>  Keep existing value of PYTHONPATH in RPython.bsh when adding
       the package-specific paths.   Thanks to Peter Kleiweg.
  <dd>
<dt>


<h2>Version 7</h2>
<h4>Minor 0</h4>
<dl>
  <dt> Moved the Python references to external pointers in R
  <dd> This simplifies things including garbage collection which
      should happen automatically.

  <dt> Added function addFromPythonConverter() for registering C
      routines for performing conversion of Python objects to R.
  <dd> More to come on this when I have time to handle R functions,
      Python functions, etc. and the other way around. It is not very
      difficult and is done in other inter-system interface packages.

  <dt> Example of converting a pygtk object to an RGtk GtkObject
      instance, e.g. for use in creating a GtkDrawingArea in pygtk and
      passing it to gtkDevice's asGtkDevice() function. Thanks to Ian
      MacDonald for the idea of doing this.
      
  <dd>
</dl>

<h2>Version 6</h2>
<h4>Minor 1</h4>
<dl>
  <dt>
  <li> Added support for PyLong type in the converters.
  <dd>

     
  <dt>
  <li> Fix to the printing of PythonReference objects in R.
  <dd>
      
  <dt>
  <li> __getattribute__ to dynamically create a wrapper function to
       facilitate calls to R functions of the form RS.funcName(...)
       without the need   to have an explicit funcName object in the RS.
  <dd> This is simple syntactic sugar which can be used via
<pre>
from R import R
R.sum([1, 2, 3, 4])
R.rnorm(10, 1000)
R.rnorm(10, sd = 8)
</pre>
   
      
</dl>



<h2>Version 6</h2>
<h4>Minor 0</h4>
<dl>
  <dt>
  <li> Added the function removePythonConverter() to connect to
       existing C routine.
  <dd>
</dl>

<h2>Version 5</h2>
<h4>Minor 4</h4>
<dl>
  <dt> Fix for startup for running Python in R for version 2.3.* of Python.
  <dd> PyMapping_Check() was modified in Python 2.3.* to return TRUE
       for primitive types such as strings.  This caused the converter
       for mappings to be called when library("RSPython") was called
       in the initialization.
</dl>


<h4>Minor: 3</h4>
<dl>
  <dt> Bug fix in C code to recognize a list last
      in a sequence of if statements when converting
      from R to Python. Bug identified by Augustin Lobo.
       
  <dd>
  <dt> Switched eval calls to R_tryEval().
  <dd>

  <dt> Raise Python run-time exceptions when R generates an error.
  <dd>
</dl>

<h2>Version 5</h2>
<h4>Minor: 2</h4>
<dl>
  <dt> Configuration for BSD using threads
      via the -pthread option for the compiler
      rather than -lpthread.
  <dd>
</dl>

<h2>Version 5</h2>
<h4>Minor: 1</h4>

<dl>
  <dt> Fixed cause of error messages about Python references
       being no longer valid in [[.PythonReference.
  <dd> Negate the test of the return from getPythonReference() in
       RPy_getAttr().
</dl>

<h2>Version 5</h2>
<h4>Minor: 0</h4>

<dl>
  <dt> Ability to specify command line arguments
       for the R engine from Python using
       the <code>__RPythonInitArgs</code> variable,
       as requested by Tim Churches.

  <dd> The initialization that takes place when the
       RS &amp; RSInternal modules are loaded
       retrieve this variable if it is defined
       and examine its contents to compute the
       command line arguments.
       If this is a string, it is used as the first
       user-level argument. If it is a Python List,
       we iterate over its elements and extrat each
       string element and make that the i-th argument.
      <p>
This initializes R as if it had been
started from the command line as
<code>R --vanilla --silent</code>
<pre>
  >> __RPythonInitArgs = ["--vanilla", "--silent"]
  >> import RS
  >> RS.call('commandArgs')  # now ask R what it was given.
</pre>
<pre>
  >> __RPythonInitArgs = "--silent"
  >> import RS      
</pre>

  <dt> Minor bug in <code>.PythonEval()</code> fixed.
  <dd>

  <dt> Catching exceptions in <code>RS_checkError()</code>
       handles both exceptions and string exceptions.
  <dd>

  <dt>
     Loading the library in R causes the initialization
     of the Python interpreter.
      
  <dd> This avoids errors due to the user forgetting
      to initialize it.

  <dt> The value returned by <code>pythonFunction()</code>
      is no longer a <code>PythonReference</code> objects.
  <dd> Dispatch of <code>[[</code> and other methods
       now more appropriate.
</dl>

<h2>Version 4</h2>
<h4>Minor: 0</h4>

This was motivated by many suggestions and patches provided by Greg
Warnes, and also observations from using the package myself in
constructint the <a href="http://www.omegahat.org/RGtk">RGtk
package</a>.

<dl>
  <dt>
      <code>[[</code> operator for Python references in R
      retrieve the value of the named field from the instance.

  <dd> e.g.<code>p[["myField"]]</code>

  <dt> Basic bug fixes.
  <dd>

</dl>

<h2>Version 3</h2>
<h4>Minor: 0</h4>
<dl>
  <dt>
  <li> If the Python interpreter has not been initialized during a
      call to a Python method, function, etc., the default
      initialization is done at that time.
  <dd>
  <dt>
  <li> Set PYTHONPATH in .PythonInit if it is not already set.
  <dd> 
</dl>


<hr>
<address><a href="http://cm.bell-labs.com/stat/duncan">Duncan Temple Lang</a>
<a href=mailto:duncan@research.bell-labs.com>&lt;duncan@research.bell-labs.com&gt;</a></address>
<!-- hhmts start -->
Last modified: Tue Oct 31 07:22:23 PST 2006
<!-- hhmts end -->
</body> </html>
